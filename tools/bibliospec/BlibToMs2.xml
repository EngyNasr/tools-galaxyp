<tool id="BlibToMs2" name="BlibToMs2" version="@VERSION@.0">
    <description>convert spectrum library blib to MS2 format</description>
    <macros>
        <import>macros.xml</import>
    </macros>
    <expand macro="requirements" />
    <command detect_errors="exit_code"><![CDATA[
        BlibToMs2   
        --mz-precision $mz_precision
        --intensity-precision $intensity_precision
        --mod-precision $mod_precision
        -f '$ms'   
        '$blib'
    ]]></command>
    <inputs>
        <param name="blib" type="data" format="sqlite" label=" Blib to convert to MS2"/>
        <param name="mz_precision" type="integer" value="2" min="1" max="6"
            label="Precision for peak m/z printed to ms2"
            help="--mz-precision"/>
        <param name="intensity_precision" type="integer" value="1" min="1" max="6"
            label="Precision for peak intensities printed to ms2"
            help="--intensity-precision"/>
        <param name="mod_precision" type="integer" value="1" min="1" max="6"
            label="Precision for modification masses"
            help="--mod-precision"/>
    </inputs>
    <outputs>
        <data name="ms2" format="ms2" label="${blib.name.rsplit('.',1)[0]}.ms2"/>
    </outputs>
    <tests>
        <test>
            <param name="redundant_blib" ftype="sqlite" value="msgf_filterd.blib"/>
            <output name="ms2" file="msgf_filterd.ms2"/>
        </test>
    </tests>
    <help><![CDATA[
BiblioSpec_ is a suite of software tools for creating and searching MS/MS peptide spectrum libraries.

BlibToMs2_ creates a library of peptide MS/MS spectra from a variety of different database search results. 

::

  Usage: BlibToMs2 [options] <library>
  
  Options:
    -f [ --file-name ] arg                Name the output ms2 file.  Default is 
                                          <library name>.ms2.
    -m [ --mz-precision ] arg (=2)        Precision for peak m/z printed to ms2. 
                                          Default 2.
    -i [ --intensity-precision ] arg (=1) Precision for peak intensities.  
                                          Default 1.
    -p [ --mod-precision ] arg (=-1)      Precision for modification masses.  
                                          Default -1 (use value in PeptideModSeq 
                                          column).
    -p [ --parameter-file ] arg           File containing search parameters.  
                                          Command line values override file 
                                          values.
    -v [ --verbosity ] arg (=status)      Control the level of output to stderr. 
                                          (silent, error, status, warn, debug, 
                                          detail, all)  Default status.
    -h [ --help ]                         Print help message.


.. _BlibToMs2: https://skyline.ms/wiki/home/software/BiblioSpec/page.view?name=BlibToMs2
.. _BiblioSpec: https://skyline.ms/project/home/software/BiblioSpec/begin.view?
    ]]></help>
    <expand macro="citations" />
</tool>
